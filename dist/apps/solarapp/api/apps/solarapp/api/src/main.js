var y=Object.create;var c=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var _=(r,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of v(e))!S.call(r,i)&&i!==t&&c(r,i,{get:()=>e[i],enumerable:!(a=u(e,i))||a.enumerable});return r};var p=(r,e,t)=>(t=r!=null?y(h(r)):{},_(e||!r||!r.__esModule?c(t,"default",{value:r,enumerable:!0}):t,r));var l=p(require("fastify")),f=require("./app/app"),d=require("./cron/jobs"),g=require("./cron/types/cron"),o=p(require("./shared/logger")),m=p(require("fs")),n=p(require("path"));const F="0.0.0.0",j=1337,s=(0,l.default)({logger:!0,http2:!0,https:{key:m.default.readFileSync(n.default.join(__dirname,".private","privkey1.pem")),cert:m.default.readFileSync(n.default.join(__dirname,".private","cert1.pem"))}});s.register(f.app),s.setErrorHandler((r,e,t)=>{t.status(400).send(r)}),s.listen({port:j,host:F},(r,e)=>{r?(0,o.default)(r):((0,o.default)(e),(0,o.default)(s.printRoutes()),(0,g.ScheduleJob)(d.creditGenerator),process.on("SIGINT",async()=>{(0,o.default)("Closing server gracefully..."),await s.close(),(0,o.default)(`
Server closed`),process.exit(0)}))});
